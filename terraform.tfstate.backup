{
  "version": 4,
  "terraform_version": "0.12.15",
  "serial": 19,
  "lineage": "7a431081-614d-659e-74df-f8343496aace",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "content",
      "provider": "provider.aws",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "Suspended",
            "acl": "public-read",
            "arn": "arn::s3:::sos-bucket-1",
            "bucket": "sos-bucket-1",
            "bucket_domain_name": "sos-bucket-1.s3.amazonaws.com",
            "bucket_prefix": null,
            "bucket_regional_domain_name": "sos-bucket-1.s3.de-muc-1.amazonaws.com",
            "cors_rule": [
              {
                "allowed_headers": [
                  "*"
                ],
                "allowed_methods": [
                  "PUT",
                  "POST"
                ],
                "allowed_origins": [
                  "https://s3-website-test.hashicorp.com"
                ],
                "expose_headers": [
                  "ETag"
                ],
                "max_age_seconds": 3000
              }
            ],
            "force_destroy": false,
            "hosted_zone_id": null,
            "id": "sos-bucket-1",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [
              {
                "object_lock_enabled": "",
                "rule": []
              }
            ],
            "policy": null,
            "region": "de-muc-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [],
            "tags": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "exoscale_compute",
      "name": "compute-1",
      "provider": "provider.exoscale",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "affinity_group_ids": [],
            "affinity_groups": [],
            "disk_size": 10,
            "display_name": "instance-1",
            "gateway": "194.182.180.1",
            "id": "1e7c8815-159b-4d27-873c-67d848dd23f2",
            "ip4": true,
            "ip6": false,
            "ip6_address": "",
            "ip6_cidr": "",
            "ip_address": "194.182.182.235",
            "key_pair": "",
            "keyboard": null,
            "name": "instance-1",
            "password": "wB5drzmhubukfdn",
            "security_group_ids": [
              "f66ec657-8966-4264-89b8-51bf74c79f46"
            ],
            "security_groups": [
              "philipp"
            ],
            "size": "Micro",
            "state": "Running",
            "tags": {},
            "template": "Linux Ubuntu 18.04 LTS 64-bit",
            "template_id": "45346aba-6027-45bc-ad1e-bd1f563c2d84",
            "timeouts": null,
            "user_data": "#!/bin/bash\napt update\napt install -y nginx\napt install -y php-fpm\napt install -y s3cmd\n\n#echo \"Hello World!\" \u003e/var/www/html/index.html\n\necho \"[default]\nhost_base = sos-de-muc-1.exo.io\nhost_bucket = %(bucket)s.de-muc-1.exo.io\naccess_key = $EXO_SOS_KEY\nsecret_key = $EXO_SOS_SECRET\nuse_https = True\" \u003e/etc/sos.s3cfg\n\necho \"\n\u003c?php\n\n$url = 's3://sos-de-muc-1.exoscale.io/test-bucket-1';\n\nsession_start();\n\nfunction saveInObjectStorage($text){\n\tglobal $url;\n\t$text = trim($text);\n\t$timestamp = time();\n\t$id = rand();\n\t$filename = strval($timestamp).'-'.strval($id).'.txt';\n\tfile_put_contents($filename, $text);\n\t\n\t$cmd = 's3cmd put '.$filename.' '.$url;\n\texec($cmd, $out, $rc);\n\t\n\treturn $rc;\n}\n\nfunction listFromObjectStorage(){\n\tglobal $url;\n\t\n\texec('s3cmd ls '.$url, $output, $rc);\n\t$objects = array_filter($output);\n\t\n\treturn $objects;\n}\n\nfunction getFromObjectStorage($objectname){\n\tglobal $url;\n\t\n\t$cmd = 's3cmd get '.$url.'/'.$objectname.' '.$objectname;\n\texec($cmd, $out2, $rc);\n\t\n\treturn $rc;\n}\n\n$uploadSuccess = false;\n\nif(!empty($_POST['submit']) \u0026\u0026 !empty($_POST['message'])){\n\t$rc = saveInObjectStorage($_POST['message']);\n\tif($rc === 0){\n\t\t$uploadSuccess = true;\n\t}\n}\n?\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n\t\u003ctitle\u003eCloud Computing IaaS - FH Campus Wien\u003c/title\u003e\n\t\u003cmeta charset='utf-8'\u003e\n\t\u003c!--\u003cscript type='text/javascript' src='./js/jquery-1.11.1.min.js'\u003e\u003c/script\u003e--\u003e\n\t\u003c!--\u003cscript src='./js/controller.js'\u003e\u003c/script\u003e--\u003e\n\t\u003cstyle\u003e\n\tbody {\n       \tmargin-top: 0px;\n       \tmargin: 0px;\n        font-family: sans-serif;\n        /*background-color: #cccccc;*/\n        color: black;\n        text-align: left;\n    }\n    #alt{\n      \tmargin-top: 0px;\n       \tmargin: 0px;\n       \tfont-family: sans-serif;\n       \tbackground-color: black;\n       \tcolor: white;\n       \ttext-align:left;\n    }\n    .centerText {\n        text-align: center;\n\t\tfont-size: 18px;\n    }\n    .centerWhiteText {\n        text-align: center;\n\t\tfont-size: 18px;\n        color: white;\n    }\n    p {\n        font-size: 12px;\n    }\n    .bold {\n       \tfont-weight: bold;\n    }       \n    .outer {\n        display: table;\n        position: absolute;\n        height: 100%;\n        width: 100%;\n    }\n    .middle {\n\t\tdisplay: table-cell;\n\t\tvertical-align: middle;\n    }\n    .inner {\n\t\tmargin-left: auto;\n        margin-right: auto; \n\t\twidth: 400px;\n        background-color: #1856ee;\n    }\n\t#content{\n\t\t/*position: fixed;*/\n\t\twidth: 60%;\n\t\tmargin: 0 auto;\n\t\tpadding-top: 2%;\n\t\tpadding-left: 5%;\n\t\tpadding-right: 5%;\n\t\t/*border: 1px solid;*/\n\t}\n    #nav {\n      \twidth: 100%;\n    }\n    #nav ul {\n       \tbackground-color: #4e75ff;\n       \tlist-style-type: none;\n       \tmargin-top: 0px;\n       \tmargin: 0 auto;\n       \tpadding: 0;\n       \toverflow: hidden;\n       \tfont-weight: bold;\n\t\ttext-align: center;\n    \ttext-decoration: none;\n    \ttext-transform: uppercase;\n    \theight:40px;\n    }\n    #nav li {\n        float: left;\n        display: inline;\n        margin: 0px;\n        /*color: white;*/\n    }\n    #nav li {\n        display: block;\n        color: white;\n        padding: 10px 10px;\n        -webkit-transition: color .15s;\n        -moz-transition: color .15s;\n        -ms-transition: color .15s;\n        -o-transition: color .15s;\n        transition: color .15s;\n    }\n\t#footer{\n\t\t/*position: fixed;*/\n\t\twidth: 100%;\n\t\tmargin: 0 auto;\n\t\ttext-align: center;\n\t\tcolor: grey;\n\t\t/*border: 1px solid;*/\n\t}\n    #nav li:link, #nav li:visited{\n        text-decoration: none;\n        margin-top: 0 auto;\n    }       \n    #nav li:hover, #nav li:active {\n        color: #3dc9ff;\n    }\n\ta.vcheader, a.vcstagehead, a.vcserver{\n\t\ttext-decoration: none;\n\t\ttext-transform: none;\n\t}\n\ta.vcheader:visited, a.vcstagehead:visited, a.vcserver:visited{\n\t\ttext-decoration: none;\n\t\ttext-transform: none;\n\t}\n\ta.vcheader:hover, a.vcstagehead:hover, a.vcserver:hover{\n\t\ttext-decoration: none;\n\t\ttext-transform: none;\n\t}\n\t#inputContainer {\n\t\tmargin-top: 0px;\n        padding: 0px;\n    }\n\ttextarea#messageBox {\n\t\twidth: 440px;\n\t\t/*width: 94%;*/\n\t\theight: 120px;\n\t\tborder: 2px solid #cccccc;\n\t\t/*margin: 0 auto;*/\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t\tfont-family: sans-serif, Tahoma;\n\t\tfont-size: 12px;\n\t\tpadding: 10px;\n\t\t/*background-image: url(bg.gif);\n\t\tbackground-position: bottom right;\n\t\tbackground-repeat: no-repeat; */\n\t}\n\t.textinput {\n\t\tmargin-top: 4px;\n\t\tbackground-color: #2E2E2E;\n\t\tcolor: #0CF79D;\n\t\t/*color: #BDBDBD;*/\n\t\tborder: 0px;\n\t\t/*background-color: #BDBDBD;*/\n\t}\n\t#listContainer{\n\t\theight: 400px;\n        width: 460px;\n\t\toverflow-y: auto;\n\t\tborder: 0px solid;\n\t\tmargin-top: 0px;\n\t\tpadding-left: 2px;\n\t\tpadding-right: 2px;\n    }\n\t\u003c/style\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cdiv id='nav'\u003e\n\u003cul\u003e\n\t\u003c!-- \u003cli\u003e\u003ca id='nav' href='startpage.php'\u003eStart\u003c/a\u003e\u003c/li\u003e --\u003e\n\t\u003cli id='start'\u003eStart\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c!-- --\u003e\n\u003cdiv id='content'\u003e\n\u003c!-- \u003cimg src='./img/fh.svg' alt='FH Campus Wien' width='20%'\u003e --\u003e\n\u003ch2\u003eWelcome to the Cloud Computing IaaS Demo\u003c/h2\u003e\n\u003cp\u003ePlease test our S3 Object Storage implementation\u003cp\u003e\n\u003cdiv id='listContainer'\u003e\n\u003c?php\n$objects = listFromObjectStorage();\nforeach($objects as $i =\u003e $objectname){\n\t$rc = getFromObjectStorage($objectname);\n\tif($rc === 0){\n\t\t$message = file_get_contents($objectname);\n\t\techo('\u003cp\u003e'.$message.'\u003c/p\u003e');\n\t}\n}\n?\u003e\n\u003c/div\u003e\n\u003cdiv id='inputContainer'\u003e\n\t\u003cform id='inputform' method='post' accept-charset='utf-8'\u003e\n\t\t\u003ctextarea id='messageBox' rows='10' cols='40' name='message' form='inputform'\u003e\u003c/textarea\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cinput type='submit' name='submit' value='   Save   '\u003e\n\t\u003c/form\u003e\n\u003c/div\u003e\n\u003c!-- --\u003e\n\u003cdiv id='footer'\u003e\n\u003cp class='footertext'\u003ecopyright \u0026copy; 2019 FH Campus Wien\u003c/p\u003e\n\u003c/div\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n\n\u003c?php\nif(!empty($_POST['submit']) \u0026\u0026 !empty($_POST['message'])){\n\t$_SESSION['session_message'] = $_POST['message'];\n}\n?\u003e\" \u003e/var/www/html/index.php\n",
            "user_data_base64": false,
            "username": "ubuntu",
            "zone": "de-muc-1"
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJyZWFkIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "exoscale_security_group.security-group-1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "exoscale_security_group",
      "name": "security-group-1",
      "provider": "provider.exoscale",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "id": "f66ec657-8966-4264-89b8-51bf74c79f46",
            "name": "philipp",
            "tags": null,
            "timeouts": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJyZWFkIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "exoscale_security_group_rule",
      "name": "http",
      "provider": "provider.exoscale",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr": "0.0.0.0/0",
            "description": null,
            "end_port": 80,
            "icmp_code": 0,
            "icmp_type": 0,
            "id": "60cada70-1264-41e2-8fd8-6106e0aeff6d",
            "protocol": "TCP",
            "security_group": "philipp",
            "security_group_id": "f66ec657-8966-4264-89b8-51bf74c79f46",
            "start_port": 80,
            "timeouts": null,
            "type": "INGRESS",
            "user_security_group": "",
            "user_security_group_id": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJyZWFkIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "exoscale_security_group.security-group-1"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "exoscale_security_group_rule",
      "name": "ssh",
      "provider": "provider.exoscale",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cidr": "213.208.153.210/32",
            "description": null,
            "end_port": 22,
            "icmp_code": 0,
            "icmp_type": 0,
            "id": "b2920ce0-c6cc-4142-8d5d-db270de81aa3",
            "protocol": "TCP",
            "security_group": "philipp",
            "security_group_id": "f66ec657-8966-4264-89b8-51bf74c79f46",
            "start_port": 22,
            "timeouts": null,
            "type": "INGRESS",
            "user_security_group": "",
            "user_security_group_id": null
          },
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJyZWFkIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "exoscale_security_group.security-group-1"
          ]
        }
      ]
    }
  ]
}
